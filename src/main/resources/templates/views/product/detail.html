<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{views/layout :: head}">
    <!--/*@thymesVar id="pageTitle" type="java.lang.String"*/-->
    <title th:text="${pageTitle} ?: 'ScanKorea'">ScanKorea</title>
</head>
<body>
<main th:fragment="~{views/layout :: content}">
    <!-- Product detail content -->
    <section
            class="w-full max-w-4xl bg-white dark:bg-slate-800 rounded-xl shadow-md grid grid-cols-1 sm:grid-cols-[300px,1fr] gap-6 sm:gap-8 p-6 sm:p-8 mx-auto">
        <!-- Product image -->
        <img th:if="${product.imageUrl}" th:src="${product.imageUrl}" alt="Product image"
             class="w-full h-64 object-cover rounded-xl bg-gray-100 dark:bg-slate-700"/>

        <!-- Product information -->
        <section>
            <p class="text-gray-500 dark:text-gray-400 text-sm mb-1" th:text="${product.brandName}">Brand</p>
            <h2 class="text-xl font-semibold mb-3" th:text="${product.displayName}">Display Name</h2>
            <p class="text-gray-700 dark:text-gray-200 mb-2">
                <span class="text-gray-500 dark:text-gray-400">GTIN:</span>
                <strong th:text="${product.gtin}" class="ml-1">0000000000000</strong>
                <span th:if="${product.verified}"
                      class="ml-2 inline-block bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-200 text-xs font-semibold px-2 py-0.5 rounded-full">
                  Verified
                </span>
            </p>

            <p class="text-gray-700 dark:text-gray-200 mb-4">
                <span class="text-gray-500 dark:text-gray-400">Origin:</span>
                <span th:text="${product.originCountry}" class="ml-1">-</span>
            </p>

            <article>
                <h3 class="text-lg font-semibold mb-2">Description</h3>
                <p th:text="${product.description}" class="text-gray-700 dark:text-gray-300 leading-relaxed">
                    No description available.
                </p>
            </article>

            <!-- Language form and back button -->
            <form class="flex flex-wrap items-center gap-2 mt-6" th:action="@{|/products/${product.gtin}|}"
                  method="get">
                <label for="lang" class="text-sm text-gray-600 dark:text-gray-300">Language</label>
                <select class="px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-gray-800 dark:text-gray-100"
                        id="lang"
                        name="lang"
                        onchange="updateLang(this.value)"
                        required>
                    <option th:each="lc : ${languages}"
                            th:selected="${lc == lang}"
                            th:value="${lc}"
                            th:text="${lc}">EN
                    </option>
                </select>

                <a th:href="@{/scan}"
                   class="bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg px-4 py-2 transition">
                    Back
                </a>
            </form>
        </section>
    </section>
</main>
</body>
</html>
